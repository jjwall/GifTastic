<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Animal Buttons</title>
</head>

<body>
  <form id="movie-form">
    <label for="movie-input">Add an Animal!</label>
    <input type="text" id="gif-input"><br>
    <input id="add-gif" type="submit" value="Magic Animal-Adding Button">
  </form>

  <div id = "button-div"></div>

  <div id="gifs-appear-here">
  </div>
  <script src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
  <script type="text/javascript">
    var gifs = ["cat", "dog", "honey badger", "elephant", "zebra", "opossum"];

    $(".animal").bind("click", appendGifs);
      function appendGifs() {
        $("#gifs-appear-here").empty();
        var animal = $(this).attr("data-animal");
        var queryURL = "http://api.giphy.com/v1/gifs/search?q=" +
        animal + "&api_key=dc6zaTOxFJmzC&limit=10";

      $.ajax({
        url: queryURL,
        method: "GET"
      }).done(function(response) {

        console.log(response);

        var results = response.data;

        for (var i = 0; i < results.length; i++) {
          var animalDiv = $("<div class='item'>");
          var rating = results[i].rating;
          var p = $("<p>").text("Rating: " + rating);
          var animalImage = $("<img>");
          animalImage.attr("src", results[i].images.fixed_height.url);
          animalDiv.prepend(p);
          animalDiv.prepend(animalImage);
          $("#gifs-appear-here").prepend(animalDiv);
         }
      });
      }

    function renderButtons() {

        $("#button-div").empty();

        for (var i = 0; i < gifs.length; i++) {

          var a = $("<button>");
         
          a.addClass("animal");
         
          a.attr("data-animal", gifs[i]);
          
          a.text(gifs[i]);
          
          $("#button-div").append(a);
        }
      }

      $("#add-gif").on("click", function(event) {
        event.preventDefault();

        var gif = $("#gif-input").val().trim();
        gifs.push(gif);

        renderButtons();
      });
      renderButtons();
      console.log(gifs)
      $(document).on("click", ".animal", appendGifs);

  </script>
</body>

</html>